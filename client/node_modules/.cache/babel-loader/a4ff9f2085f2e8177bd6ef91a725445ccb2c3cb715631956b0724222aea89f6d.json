{"ast":null,"code":"var _jsxFileName = \"D:\\\\algoengine\\\\client\\\\src\\\\components\\\\assistant\\\\Assistant.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./Assistant.css\";\n// constants\nimport { MAIN_NYRA_PNG } from \"../../constants/images\";\n// components\nimport ChatBox from \"../chatBox/ChatBox\";\n// contexts\nimport UserContext from \"../../contexts/userContext\";\n// mui\nimport { Fab, Avatar } from \"@mui/material\";\nimport { DSA_ROUTE } from \"../../constants/routes\";\n// speech recognition\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\nconst recognizer = new SpeechRecognition();\n// speech synthesis\nconst utterance = new SpeechSynthesisUtterance();\nconst Assistant = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    user,\n    setSearch\n  } = useContext(UserContext);\n  const [activate, setActivate] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [isNyraSpeaking, setIsNyraSpeaking] = useState(false);\n  const [messages, setMessages] = useState([{\n    date: new Date(),\n    content: \"Enter your DSA question and let me search through!\",\n    from: \"Nyra\"\n  }]);\n  const saySpeech = speech => {\n    utterance.text = speech;\n    window.speechSynthesis.speak(utterance);\n  };\n  const processCommand = useCallback(command => {\n    setSearch(command.toLowerCase());\n    navigate(DSA_ROUTE);\n    saySpeech(\"Here are the search results for your question!\");\n    return {\n      from: \"Nyra\",\n      content: \"Here are the search results for your question!\",\n      date: new Date()\n    };\n  }, [navigate, setSearch]);\n  const handleNewCommand = useCallback(command => {\n    const newMessage = {\n      from: user.roll,\n      content: command,\n      date: new Date()\n    };\n    setMessages(messages => [...messages, newMessage]);\n    const nyraMessage = processCommand(command);\n    setTimeout(() => {\n      setMessages(messages => [...messages, nyraMessage]);\n    }, 500);\n  }, [user, processCommand]);\n  useEffect(() => {\n    // recognizer\n    recognizer.onstart = () => {\n      console.log(\"Started Listening...\");\n    };\n    recognizer.onend = () => {\n      console.log(\"Stopped Listening...\");\n    };\n    recognizer.onresult = e => {\n      setIsListening(false);\n      const command = e.results[0][0].transcript;\n      handleNewCommand(command);\n    };\n    // utterance\n    window.speechSynthesis.onvoiceschanged = () => {\n      const voices = window.speechSynthesis.getVoices();\n      utterance.voice = voices[12];\n    };\n    utterance.onstart = () => {\n      setIsNyraSpeaking(true);\n    };\n    utterance.onend = () => {\n      setIsNyraSpeaking(false);\n    };\n  }, [handleNewCommand]);\n  useEffect(() => {\n    if (isListening) recognizer.start();else recognizer.stop();\n  }, [isListening]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"assistant\",\n    children: [/*#__PURE__*/_jsxDEV(Fab, {\n      className: \"assistant__toggle\",\n      onClick: () => setActivate(activate => !activate),\n      tabIndex: 0,\n      children: /*#__PURE__*/_jsxDEV(Avatar, {\n        src: MAIN_NYRA_PNG,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ChatBox, {\n      isListening: isListening,\n      setIsListening: setIsListening,\n      isNyraSpeaking: isNyraSpeaking,\n      setActivate: setActivate,\n      username: user.name,\n      messages: messages,\n      handleNewCommand: handleNewCommand,\n      style: activate ? {\n        width: \"300px\",\n        height: \"400px\"\n      } : {\n        width: \"0px\",\n        height: \"0px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n};\n_s(Assistant, \"y0ApM/2Pj3DdXydEbpVYqua1qrY=\", false, function () {\n  return [useNavigate];\n});\n_c = Assistant;\nexport default Assistant;\nvar _c;\n$RefreshReg$(_c, \"Assistant\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","useNavigate","MAIN_NYRA_PNG","ChatBox","UserContext","Fab","Avatar","DSA_ROUTE","jsxDEV","_jsxDEV","SpeechRecognition","window","webkitSpeechRecognition","recognizer","utterance","SpeechSynthesisUtterance","Assistant","_s","navigate","user","setSearch","activate","setActivate","isListening","setIsListening","isNyraSpeaking","setIsNyraSpeaking","messages","setMessages","date","Date","content","from","saySpeech","speech","text","speechSynthesis","speak","processCommand","command","toLowerCase","handleNewCommand","newMessage","roll","nyraMessage","setTimeout","onstart","console","log","onend","onresult","e","results","transcript","onvoiceschanged","voices","getVoices","voice","start","stop","className","children","onClick","tabIndex","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","username","name","style","width","height","_c","$RefreshReg$"],"sources":["D:/algoengine/client/src/components/assistant/Assistant.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./Assistant.css\";\r\n// constants\r\nimport { MAIN_NYRA_PNG } from \"../../constants/images\";\r\n// components\r\nimport ChatBox from \"../chatBox/ChatBox\";\r\n// contexts\r\nimport UserContext from \"../../contexts/userContext\";\r\n// mui\r\nimport { Fab, Avatar } from \"@mui/material\";\r\nimport { DSA_ROUTE } from \"../../constants/routes\";\r\n// speech recognition\r\nconst SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\nconst recognizer = new SpeechRecognition();\r\n// speech synthesis\r\nconst utterance = new SpeechSynthesisUtterance();\r\n\r\nconst Assistant = () => {\r\n    const navigate = useNavigate();\r\n    const { user, setSearch } = useContext(UserContext);\r\n    const [activate, setActivate] = useState(false);\r\n    const [isListening, setIsListening] = useState(false);\r\n    const [isNyraSpeaking, setIsNyraSpeaking] = useState(false);\r\n    const [messages, setMessages] = useState([{\r\n        date: new Date(), content: \"Enter your DSA question and let me search through!\", from: \"Nyra\"\r\n    }]);\r\n\r\n    const saySpeech = speech => {\r\n        utterance.text = speech;\r\n        window.speechSynthesis.speak(utterance);\r\n    }\r\n\r\n    const processCommand = useCallback(command => {\r\n        setSearch(command.toLowerCase());\r\n        navigate(DSA_ROUTE);\r\n        saySpeech(\"Here are the search results for your question!\");\r\n        return ({ from: \"Nyra\", content: \"Here are the search results for your question!\", date: new Date() });\r\n    }, [navigate, setSearch]);\r\n\r\n    const handleNewCommand = useCallback(command => {\r\n        const newMessage = { from: user.roll, content: command, date: new Date() }\r\n        setMessages(messages => [...messages, newMessage]);\r\n\r\n        const nyraMessage = processCommand(command);\r\n        setTimeout(() => {\r\n            setMessages(messages => [...messages, nyraMessage]);\r\n        }, 500);\r\n    }, [user, processCommand]);\r\n\r\n    useEffect(() => {\r\n        // recognizer\r\n        recognizer.onstart = () => {\r\n            console.log(\"Started Listening...\");\r\n        }\r\n        recognizer.onend = () => {\r\n            console.log(\"Stopped Listening...\");\r\n        }\r\n        recognizer.onresult = e => {\r\n            setIsListening(false);\r\n            const command = e.results[0][0].transcript;\r\n            handleNewCommand(command);\r\n        }\r\n        // utterance\r\n        window.speechSynthesis.onvoiceschanged = () => {\r\n            const voices = window.speechSynthesis.getVoices()\r\n            utterance.voice = voices[12];\r\n        };\r\n        utterance.onstart = () => {\r\n            setIsNyraSpeaking(true);\r\n        };\r\n        utterance.onend = () => {\r\n            setIsNyraSpeaking(false);\r\n        };\r\n    }, [handleNewCommand]);\r\n\r\n    useEffect(() => {\r\n        if (isListening) recognizer.start();\r\n        else recognizer.stop();\r\n    }, [isListening]);\r\n\r\n    return (\r\n        <div className=\"assistant\">\r\n            <Fab className=\"assistant__toggle\" onClick={() => setActivate(activate => !activate)} tabIndex={0}>\r\n                <Avatar src={MAIN_NYRA_PNG} alt=\"\" />\r\n            </Fab>\r\n            <ChatBox isListening={isListening} setIsListening={setIsListening} isNyraSpeaking={isNyraSpeaking} setActivate={setActivate} username={user.name} messages={messages} handleNewCommand={handleNewCommand} style={activate ? { width: \"300px\", height: \"400px\" } : { width: \"0px\", height: \"0px\" }} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Assistant;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}